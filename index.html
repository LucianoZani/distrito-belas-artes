
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Interativo | Distrito Belas Artes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">
<!-- Chosen Palette: Calm Neutrals & Soft Teal -->
<!-- Application Structure Plan: A dashboard-style layout was chosen to provide an immediate high-level overview followed by a detailed, interactive exploration section. The structure flows from general to specific: 1) Key stats cards for a quick summary. 2) A primary donut chart for community comparison. 3) An interactive section with filters to select a community, which then dynamically displays its blocks as cards. Clicking a block reveals its members. This drill-down approach makes the hierarchical data easy to digest without overwhelming the user, promoting intuitive exploration over a static presentation. -->
<!-- Visualization & Content Choices: 
- Key Stats (Total Members, Communities, Blocks): Goal: Inform. Method: HTML stat cards. Interaction: None. Justification: Provides a quick, scannable summary of the organization's scale.
- Member Distribution by Community: Goal: Compare. Method: Donut Chart (Chart.js). Interaction: Hover for details, click to filter blocks below. Justification: Excellent for showing part-to-whole relationships and serves as a primary navigation element.
- Detailed Structure (Communities/Blocks/Members): Goal: Organize/Explore. Method: HTML buttons for community filtering, a grid of cards for blocks, and expandable lists for members. Interaction: Click-based filtering and drill-down. Justification: Prevents information overload by revealing data progressively, guiding the user through the hierarchy in a structured manner.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-7xl">

        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl sm:text-4xl font-bold text-teal-800">Nova Estrutura Organizacional</h1>
            <p class="text-lg text-stone-600 mt-2">Distrito Belas Artes</p>
        </header>

        <main>
            <section id="overview" class="mb-8 md:mb-12">
                <h2 class="text-2xl font-semibold text-stone-700 mb-4 text-center">Visão Geral</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">
                    <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm text-center">
                        <h3 class="text-4xl font-bold text-teal-600" id="total-membros"></h3>
                        <p class="text-stone-500 mt-1">Famílias</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm text-center">
                        <h3 class="text-4xl font-bold text-teal-600" id="total-comunidades"></h3>
                        <p class="text-stone-500 mt-1">Comunidades</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm text-center">
                        <h3 class="text-4xl font-bold text-teal-600" id="total-blocos"></h3>
                        <p class="text-stone-500 mt-1">Blocos</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-stone-200 shadow-sm text-center flex flex-col justify-center">
                        <p class="text-stone-600">Uma estrutura pensada para fortalecer a atuação local e otimizar a colaboração.</p>
                    </div>
                </div>
            </section>

            <section class="mb-8 md:mb-12 bg-white p-4 sm:p-6 rounded-xl border border-stone-200 shadow-sm">
                 <h2 class="text-2xl font-semibold text-stone-700 mb-4 text-center">Distribuição por Comunidade</h2>
                 <p class="text-center text-stone-500 mb-6 max-w-2xl mx-auto">O gráfico abaixo mostra a proporção de famílias em cada uma das três comunidades. Clique em uma seção para filtrar os detalhes dos blocos abaixo.</p>
                <div class="chart-container">
                    <canvas id="comunidadesChart"></canvas>
                </div>
            </section>

            <section id="explorer">
                <h2 class="text-2xl font-semibold text-stone-700 mb-4 text-center">Explore a Estrutura</h2>
                <p class="text-center text-stone-500 mb-6 max-w-2xl mx-auto">Selecione uma comunidade para visualizar seus blocos e famílias. Clique em um bloco para ver a lista de participantes.</p>
                <div id="community-filters" class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-8"></div>
                <div id="blocks-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6"></div>
            </section>

        </main>
    </div>

    <script>
        const data = {
            comunidades: [
                {
                    nome: "Belas Artes",
                    blocos: [
                        { nome: "Bloco Cibratel", membros: ["Aldagisa", "Josefa", "Manoela Guida", "Roquelina", "Ana", "Edna", "Dna Regina", "Lucia"] },
                        { nome: "Bloco Belas Artes", membros: ["Dna Ines", "Silmara", "Luciano", "João", "Tabata", "Aline Cuba"] }
                    ]
                },
                {
                    nome: "CESP",
                    blocos: [
                        { nome: "Bloco IEDA", membros: ["Taís", "João Arruda", "Cida", "Alice", "Creuza", "Eloá", "Helena"] },
                        { nome: "Bloco CESP", membros: ["Sheila", "Jaqueline", "Paloma", "Luciene", "Carol", "Shimada"] }
                    ]
                },
                {
                    nome: "Coronel",
                    blocos: [
                        { nome: "Bloco Coronel", membros: ["Sonia Flores", "Jean Pierre", "Lourival", "Shirley", "Dna Edi", "Greyci", "Creuza Lucas", "Fabricio"] },
                        { nome: "Bloco Fluvial", membros: ["Anderson", "Geane", "Sonia", "Yolanda", "Doris", "Rosa", "Nice"] }
                    ]
                }
            ]
        };

        let comunidadesChart = null;

        document.addEventListener('DOMContentLoaded', () => {
            initDashboard();
        });

        function initDashboard() {
            displayStats();
            createCommunityFilters();
            renderComunidadesChart();
            displayBlocks('Todos');
        }

        function getTotals() {
            const totalMembros = data.comunidades.reduce((sum, com) => sum + com.blocos.reduce((s, b) => s + b.membros.length, 0), 0);
            const totalComunidades = data.comunidades.length;
            const totalBlocos = data.comunidades.reduce((sum, com) => sum + com.blocos.length, 0);
            return { totalMembros, totalComunidades, totalBlocos };
        }

        function displayStats() {
            const { totalMembros, totalComunidades, totalBlocos } = getTotals();
            document.getElementById('total-membros').textContent = totalMembros;
            document.getElementById('total-comunidades').textContent = totalComunidades;
            document.getElementById('total-blocos').textContent = totalBlocos;
        }
        
        function createCommunityFilters() {
            const container = document.getElementById('community-filters');
            container.innerHTML = '';
            const allButton = createFilterButton('Todos', true);
            container.appendChild(allButton);

            data.comunidades.forEach(comunidade => {
                const button = createFilterButton(comunidade.nome);
                container.appendChild(button);
            });
        }

        function createFilterButton(name, isActive = false) {
            const button = document.createElement('button');
            button.textContent = name;
            button.dataset.filter = name;
            button.className = `px-4 py-2 rounded-full text-sm font-medium transition-colors duration-200 ${isActive ? 'bg-teal-600 text-white shadow' : 'bg-white text-teal-700 hover:bg-teal-50 border border-teal-200'}`;
            button.onclick = () => handleFilterClick(name);
            return button;
        }

        function handleFilterClick(filter) {
            document.querySelectorAll('#community-filters button').forEach(btn => {
                if (btn.dataset.filter === filter) {
                    btn.className = 'px-4 py-2 rounded-full text-sm font-medium transition-colors duration-200 bg-teal-600 text-white shadow';
                } else {
                    btn.className = 'px-4 py-2 rounded-full text-sm font-medium transition-colors duration-200 bg-white text-teal-700 hover:bg-teal-50 border border-teal-200';
                }
            });
            displayBlocks(filter);
        }

        function displayBlocks(filter) {
            const container = document.getElementById('blocks-container');
            container.innerHTML = '';

            const comunidadesToShow = filter === 'Todos' 
                ? data.comunidades 
                : data.comunidades.filter(c => c.nome === filter);

            comunidadesToShow.forEach(comunidade => {
                comunidade.blocos.forEach(bloco => {
                    const card = document.createElement('div');
                    card.className = 'bg-white p-5 rounded-xl border border-stone-200 shadow-sm cursor-pointer hover:shadow-lg hover:border-teal-300 transition-all duration-300 fade-in';
                    card.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="text-lg font-semibold text-stone-800">${bloco.nome}</h3>
                                <p class="text-sm text-stone-500">${comunidade.nome}</p>
                            </div>
                            <div class="text-right">
                               <span class="text-2xl font-bold text-teal-600">${bloco.membros.length}</span>
                               <p class="text-xs text-stone-400">famílias</p>
                            </div>
                        </div>
                        <div class="member-list hidden mt-4 pt-4 border-t border-stone-200">
                            <ul class="space-y-2">
                                ${bloco.membros.map(membro => `<li class="text-stone-700">${membro}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                    card.addEventListener('click', () => {
                        card.querySelector('.member-list').classList.toggle('hidden');
                    });
                    container.appendChild(card);
                });
            });
        }
        
        function renderComunidadesChart() {
            const ctx = document.getElementById('comunidadesChart').getContext('2d');
            const labels = data.comunidades.map(c => c.nome);
            const chartData = data.comunidades.map(c => c.blocos.reduce((sum, b) => sum + b.membros.length, 0));

            if (comunidadesChart) {
                comunidadesChart.destroy();
            }

            comunidadesChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Famílias por Comunidade',
                        data: chartData,
                        backgroundColor: ['#0d9488', '#14b8a6', '#5eead4'],
                        borderColor: '#f5f5f4',
                        borderWidth: 4,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14,
                                    family: 'Inter'
                                }
                            }
                        },
                        tooltip: {
                            padding: 12,
                            titleFont: { size: 16, weight: 'bold', family: 'Inter' },
                            bodyFont: { size: 14, family: 'Inter' },
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw} famílias`;
                                }
                            }
                        }
                    },
                    onClick: (event, elements) => {
                        if (elements.length > 0) {
                            const clickedLabel = labels[elements[0].index];
                            handleFilterClick(clickedLabel);
                        }
                    }
                }
            });
        }

    </script>
</body>
</html>